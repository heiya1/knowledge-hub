@import "katex/dist/katex.min.css";
@import "tailwindcss";

@theme {
  /* Light mode colors (Confluence-inspired) */
  --color-bg-main: #ffffff;
  --color-bg-sidebar: #f4f5f7;
  --color-bg-hover: #ebecf0;
  --color-text-primary: #172b4d;
  --color-text-secondary: #6b778c;
  --color-accent: #0052cc;
  --color-accent-hover: #0065ff;
  --color-border: #dfe1e6;
  --color-sidebar-selected: #e3f2fd;
  --color-danger: #de350b;
  --color-success: #00875a;
  --color-warning: #ff991f;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --color-bg-main: #1d2125;
    --color-bg-sidebar: #161a1d;
    --color-bg-hover: #2c333a;
    --color-text-primary: #b6c2cf;
    --color-text-secondary: #8c9bab;
    --color-accent: #579dff;
    --color-accent-hover: #388bff;
    --color-border: #2c333a;
    --color-sidebar-selected: #1c2b41;
    --color-danger: #ff5630;
    --color-success: #36b37e;
    --color-warning: #ffab00;
  }
}

.dark {
  --color-bg-main: #1d2125;
  --color-bg-sidebar: #161a1d;
  --color-bg-hover: #2c333a;
  --color-text-primary: #b6c2cf;
  --color-text-secondary: #8c9bab;
  --color-accent: #579dff;
  --color-accent-hover: #388bff;
  --color-border: #2c333a;
  --color-sidebar-selected: #1c2b41;
  --color-danger: #ff5630;
  --color-success: #36b37e;
  --color-warning: #ffab00;
}

html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-bg-main);
  color: var(--color-text-primary);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
}

/* TipTap editor styles */
.ProseMirror {
  outline: none;
  min-height: 300px;
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem;
}

.ProseMirror p.is-editor-empty:first-child::before {
  color: var(--color-text-secondary);
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

.ProseMirror h1 {
  font-size: 2rem;
  font-weight: 600;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
}

.ProseMirror h2 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

.ProseMirror h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5rem;
  margin: 0.5rem 0;
}

.ProseMirror li {
  margin: 0.125rem 0;
}

.ProseMirror ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0;
}

.ProseMirror ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

.ProseMirror ul[data-type="taskList"] li label input[type="checkbox"] {
  margin-top: 0.25rem;
}

.ProseMirror blockquote {
  border-left: 3px solid var(--color-border);
  padding-left: 1rem;
  margin: 0.5rem 0;
  color: var(--color-text-secondary);
}

.ProseMirror code {
  background-color: var(--color-bg-hover);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-family: 'SFMono-Regular', Menlo, Monaco, 'Courier New', monospace;
  font-size: 0.875em;
}

.ProseMirror pre {
  background-color: var(--color-bg-sidebar);
  border: 1px solid var(--color-border);
  border-radius: 0.375rem;
  padding: 1rem;
  overflow-x: auto;
  margin: 0.75rem 0;
}

.ProseMirror pre code {
  background: none;
  padding: 0;
  border-radius: 0;
}

.ProseMirror hr {
  border: none;
  border-top: 1px solid var(--color-border);
  margin: 1.5rem 0;
}

.ProseMirror a {
  color: var(--color-accent);
  text-decoration: underline;
  cursor: pointer;
}

.ProseMirror table {
  border-collapse: collapse;
  width: 100%;
  margin: 0.75rem 0;
}

.ProseMirror table td,
.ProseMirror table th {
  border: 1px solid var(--color-border);
  padding: 0.5rem;
  min-width: 100px;
}

.ProseMirror table th {
  background-color: var(--color-bg-sidebar);
  font-weight: 600;
}

.ProseMirror img {
  max-width: 100%;
  height: auto;
  border-radius: 0.375rem;
}

.ProseMirror .wiki-link {
  color: var(--color-accent);
  cursor: pointer;
  text-decoration: underline;
  text-decoration-style: dotted;
  transition: color 0.15s;
}

.ProseMirror .wiki-link:hover {
  color: var(--color-accent-hover);
}

/* Mermaid block */
.ProseMirror .mermaid-block {
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: 16px;
  margin: 8px 0;
  background: var(--color-bg-sidebar);
}

.ProseMirror .mermaid-block svg {
  max-width: 100%;
  height: auto;
}

/* Table of Contents */
.ProseMirror .toc-block {
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: 16px;
  margin: 8px 0;
  background: var(--color-bg-sidebar);
}

/* Callout blocks */
.ProseMirror .callout {
  margin: 8px 0;
  border-radius: 4px;
  padding: 12px 16px;
}

.ProseMirror .callout-info {
  background: #e3f2fd;
  border-left: 4px solid #2196f3;
}

.ProseMirror .callout-warning {
  background: #fff3e0;
  border-left: 4px solid #ff9800;
}

.ProseMirror .callout-tip {
  background: #e8f5e9;
  border-left: 4px solid #4caf50;
}

.ProseMirror .callout-error {
  background: #fbe9e7;
  border-left: 4px solid #f44336;
}

/* Dark mode callout overrides */
.dark .ProseMirror .callout-info,
:root:not(.light) .ProseMirror .callout-info {
  background: #1a3a5c;
}

.dark .ProseMirror .callout-warning,
:root:not(.light) .ProseMirror .callout-warning {
  background: #4a3520;
}

.dark .ProseMirror .callout-tip,
:root:not(.light) .ProseMirror .callout-tip {
  background: #1a3c2a;
}

.dark .ProseMirror .callout-error,
:root:not(.light) .ProseMirror .callout-error {
  background: #4a2020;
}

/* KaTeX overrides */
.ProseMirror span[data-math-inline] .katex {
  font-size: 1em;
}

.ProseMirror div[data-math-block] .katex {
  font-size: 1.2em;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-secondary);
}
